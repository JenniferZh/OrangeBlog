---
title: 程序员的自我修养——编译器
date: 2020-01-30 16:13:16
tags:
- reading
- 程序员的自我修养
---

 本章介绍了程序从源代码到可执行文件的步骤，简单介绍目标文件的分类

## 编译流程

1. 预编译
- .cpp+.h -> .i

``` bash
gcc -E hello.c -o hello.i
```

2. 编译
- .i -> .s
- 词法分析，语法分析，语义分析，中间代码生成，优化

``` bash
gcc -s hello.c -o hello.s
```

3. 汇编
- .s -> .o
- 汇编代码转化为机器码

``` bash
gcc -c hello.c -o hello.o
```

4. 链接
- .o -> .out
- 把独立的模块组装到一起，步骤主要包括**地址和空间分配**，**符号决议**，**重定位**，链接的核心就是多个模块结合成可执行文件时，确定各个模块引用的模块外部的函数，数据的地址。各个模块的编译过程中，访问的外部变量的地址无法确定，暂时被填为0，链接的过程会修改所有单独编译的模块的不确定的地址。

## 目标文件的分类

1. 可重定位文件 (Relocatable File)
- .o文件(linux) .a文件(.o文件的集合，静态链接库)
- .obj文件(windows) .lib文件(.obj文件的集合，静态链接库)

2. 共享目标文件 (Shared Object File)
- .so文件(linux)
- .dll文件(windows)

3. 可执行文件
- .exe(windows)

